<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Redirecting...</title>

<!-- Your AD Script -->
<script id="AdsCoreLoader" 
src="https://sads.adsboosters.xyz/ffc8b614d688665892a7071a2a3dc5f2.js"
data-cfasync="false"></script>

<script>
// Domains to rotate
const domains = [
  "https://glimmerbyte.com/",
  "https://healthyhumansource.com/",
  "https://eduprothink.com/",
  "https://linkcents.com/"
];

// Shuffle function
function shuffle(arr) {
  for (let i = arr.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [arr[i], arr[j]] = [arr[j], arr[i]];
  }
  return arr;
}

let params = new URLSearchParams(window.location.search);
let orderParam = params.get("order");
let index = parseInt(params.get("index")) || 0;

let order;

// If first time visiting any domain → shuffle order
if (!orderParam) {
  order = shuffle([...domains]);
  index = 0;
} else {
  order = atob(orderParam).split(",");
}

// Final page after all 4 domains
const finalPage = "https://testss-3c9.pages.dev/";

// Delay 5–7 seconds
function randomDelay() {
  return 5000 + Math.floor(Math.random() * 2000);
}

function handleRedirect() {
  setTimeout(() => {
    if (index < order.length - 1) {
      index++;
      const encoded = btoa(order.join(","));
      const nextUrl = order[index] + "?order=" + encoded + "&index=" + index;
      window.location.href = nextUrl;
    } else {
      window.location.href = finalPage;
    }
  }, randomDelay());
}

// Run redirect when ad script loads or fails
const adScript = document.getElementById("AdsCoreLoader");

if (adScript) {
  adScript.addEventListener("load", handleRedirect);
  adScript.addEventListener("error", handleRedirect);
} else {
  handleRedirect();
}
</script>

</head>
<body>
Loading...
</body>
</html>
