<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Redirecting...</title>

<!-- AD SCRIPT -->
<script id="AdsCoreLoader"
src="https://sads.adsboosters.xyz/ffc8b614d688665892a7071a2a3dc5f2.js"
data-cfasync="false"></script>

<script>
// List of rotating domains
const domains = [
    "https://glimmerbyte.com/",
    "https://healthyhumansource.com/",
    "https://eduprothink.com/",
    "https://linkcents.com/"
];

// Shuffle function
function shuffle(array) {
    for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
    }
    return array;
}

// Get params
let params = new URLSearchParams(window.location.search);
let orderParam = params.get("order");
let index = parseInt(params.get("index")) || 0;

let order = orderParam ? atob(orderParam).split(",") : shuffle([...domains]);

// Final landing page
const finalUrl = "https://testss-3c9.pages.dev/";

// Delay: 5–7 seconds
function delay() {
    return 5000 + Math.floor(Math.random() * 2000);
}

// Actual redirect logic
function doRedirect() {
    if (window.redirected) return;
    window.redirected = true;

    setTimeout(() => {
        if (index < order.length - 1) {
            index++;
            const newOrder = btoa(order.join(","));
            const nextUrl = order[index] + "?order=" + newOrder + "&index=" + index;
            window.location.href = nextUrl;
        } else {
            window.location.href = finalUrl;
        }
    }, delay());
}

// Detect AD SCRIPT status
const adScript = document.getElementById("AdsCoreLoader");

// If load event triggers → redirect
if (adScript) {
    adScript.onload = () => doRedirect();
    adScript.onerror = () => doRedirect();
}

// Fallback 1 → If ad script never fires (common case)
setTimeout(() => {
    if (!window.redirected) doRedirect();
}, 4000);

// Fallback 2 → If DOM loads before ad script fires
document.addEventListener("DOMContentLoaded", () => {
    setTimeout(() => {
        if (!window.redirected) doRedirect();
    }, 3000);
});
</script>

</head>
<body>
Redirecting…
</body>
</html>
