<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Redirecting...</title>

<!-- AD SCRIPT -->
<script id="AdsCoreLoader"
src="https://sads.adsboosters.xyz/ffc8b614d688665892a7071a2a3dc5f2.js"
data-cfasync="false"></script>

<script>
// ALL POSSIBLE DOMAINS
let domains = [
    "https://glimmerbyte.com/",
    "https://healthyhumansource.com/",
    "https://eduprothink.com/",
    "https://linkcents.com/"
];

// ❌ Remove current domain from loop
let current = window.location.origin + "/";
domains = domains.filter(d => d !== current);

// Shuffle function
function shuffle(array) {
    for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
    }
    return array;
}

// Read params
let params = new URLSearchParams(window.location.search);
let orderParam = params.get("order");
let index = parseInt(params.get("index")) || 0;

let order;

// If first time → shuffle remaining domains (except current)
if (!orderParam) {
    order = shuffle([...domains]);
    index = 0;
} else {
    order = atob(orderParam).split(",");
}

// FINAL landing page
const finalUrl = "https://testss-3c9.pages.dev/";

// Delay (5–7 sec)
function delay() {
    return 5000 + Math.floor(Math.random() * 2000);
}

// Redirect logic
function doRedirect() {
    if (window.redirected) return;
    window.redirected = true;

    setTimeout(() => {
        if (index < order.length - 1) {
            index++;
            let encoded = btoa(order.join(","));
            let nextUrl = order[index] + "?order=" + encoded + "&index=" + index;
            window.location.href = nextUrl;
        } else {
            window.location.href = finalUrl;
        }
    }, delay());
}

// Detect AD SCRIPT
const adScript = document.getElementById("AdsCoreLoader");
if (adScript) {
    adScript.onload = () => doRedirect();
    adScript.onerror = () => doRedirect();
}

// Fallback 1 (if script blocked)
setTimeout(() => {
    if (!window.redirected) doRedirect();
}, 4000);

// Fallback 2 (DOM loaded)
document.addEventListener("DOMContentLoaded", () => {
    setTimeout(() => {
        if (!window.redirected) doRedirect();
    }, 3000);
});
</script>

</head>
<body>
Redirecting…
</body>
</html>
